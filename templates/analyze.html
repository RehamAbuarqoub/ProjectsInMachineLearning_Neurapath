<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Skill Gap Analysis – Neurapath</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        html, body {
            min-height: 100vh;
            background: #f8fafd;
            font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
        }
        .header-section {
            width: 100%;
            padding: 3.5rem 0 2.3rem 0;
            background: linear-gradient(90deg, #149dcc 62%, #48b5d7 85%, #d6f6fe 100%);
            text-align: left;
            min-height: 290px;
            border-bottom: 2px solid #e6eaf0;
        }
        .header-inner {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 3vw;
        }
        .header-title {
            font-size: 2.8rem;
            font-weight: 700;
            color: #fff;
            letter-spacing: .6px;
            margin-bottom: 1.3rem;
        }
        .header-desc {
            color: #eafffd;
            font-size: 1.36rem;
            margin-bottom: 1.5rem;
            font-weight: 400;
            max-width: 700px;
        }
        .header-divider {
            width: 76px;
            height: 5px;
            border-radius: 2px;
            background: linear-gradient(90deg, #24b2ff 40%, #ffe77a 100%);
            margin-top: 20px;
            margin-left: 2px;
            margin-bottom: 6px;
        }
        .analyze-form-outer {
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            margin-top: 40px;
            margin-bottom: 54px;
        }
        .analyze-form-inner {
            width: 80%;
            max-width: 950px;
            background: none;
            padding: 0;
        }
        .form-label {
            font-weight: 700;
            color: #1976d2;
            font-size: 1.16rem;
            margin-bottom: 0.3rem;
        }
        .form-select-lg, .form-control {
            font-size: 1.13rem;
            border-radius: 1.2rem;
            min-height: 54px;
            border: 1.8px solid #e1e8ed;
            background: #fff;
            box-shadow: none;
            transition: border 0.2s;
        }
        .form-select-lg:focus, .form-control:focus {
            border: 2px solid #1b8fff;
            background: #fcfeff;
        }
        .dropzone {
            background: #f7fcff;
            border: 2.3px dashed #16aaff;
            border-radius: 18px;
            min-height: 108px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: border-color 0.18s;
            margin-bottom: 1.18rem;
        }
        .dropzone.dragover {
            border-color: #0079ff;
            background: #e5f3ff;
        }
        .dropzone-label {
            font-size: 1.22rem;
            color: #1897fb;
            font-weight: 600;
            margin: 0.7rem 0;
            text-align: center;
            width: 100%;
        }
        .dropzone input[type="file"] { display: none; }
        .selected-file {
            color: #13b159;
            font-size: 1rem;
            margin-top: 0.08rem;
        }
        .helper-text {
            font-size: 1.04rem;
            color: #2196f3;
            margin-bottom: 1.13rem;
        }
        .btn-primary {
            font-weight: 700;
            letter-spacing: .01em;
            font-size: 1.25rem;
            border-radius: 18px;
            min-height: 56px;
            background: #1185fb;
            border: none;
            transition: background .16s;
        }
        .btn-primary:hover, .btn-primary:focus {
            background: #076de0;
        }
        .alert-danger { animation: fadein .17s; }
        .logout-link {
            text-align: center;
            display: block;
            color: #b0b7be !important;
            margin-top: 1.18rem;
            font-size: 1.02rem;
            text-decoration: none;
        }
        @media (max-width: 1100px) {
            .header-inner { max-width: 99vw; }
            .analyze-form-inner { width: 96%; max-width: 99vw;}
            .header-title { font-size: 2rem; }
        }
        @media (max-width: 700px) {
            .header-title { font-size: 1.35rem; }
            .header-desc { font-size: 1.05rem; }
            .analyze-form-inner { width: 100%; padding: 0 2vw;}
            .form-select-lg, .form-control, .btn-primary { font-size: 1rem; }
        }
    </style>
</head>
<body>
    <div class="header-section">
        <div class="header-inner">
            <div class="header-title">Skill Gap Analysis – Neurapath</div>
            <div class="header-desc">
                Instantly discover your job match and skill gaps. Upload your resume and select a role—no data is stored, ever.
            </div>
            <div class="header-divider"></div>
        </div>
    </div>
    <div class="analyze-form-outer">
        <div class="analyze-form-inner" id="analyzeCard">
            <form method="POST" enctype="multipart/form-data" id="analyzeForm" onsubmit="return showAnalyzeLoading();">
                <label for="job_idx" class="form-label">Select Job Role</label>
                <select name="job_idx" class="form-select form-select-lg mb-4" required>
                    {% for idx, job in job_options %}
                    <option value="{{ idx }}">{{ job }}</option>
                    {% endfor %}
                </select>
                <label for="resume" class="form-label">Upload Resume (PDF/DOCX)</label>
                <div class="dropzone mb-3" id="dropzone" onclick="document.getElementById('resumeInput').click();" ondragover="dragOverHandler(event);" ondragleave="dragLeaveHandler(event);" ondrop="dropHandler(event);">
                    <span class="dropzone-label">Click or Drag & Drop your file here</span>
                    <input type="file" name="resume" id="resumeInput" accept=".pdf,.docx" required onchange="showFileName()">
                    <span class="selected-file" id="fileNameLabel"></span>
                </div>
                <div class="helper-text">Your file is <b>not stored</b> – used only for instant analysis</div>
                {% if error %}
                <div class="alert alert-danger text-center mt-2 mb-3" id="errorBox">{{ error }}</div>
                {% endif %}
                <button type="submit" id="analyzeBtn" class="btn btn-primary btn-lg w-100 shadow-sm mb-2">
                    <span id="analyzeBtnText">Analyze Resume</span>
                </button>
                <a href="{{ url_for('logout') }}" class="logout-link">Logout</a>
            </form>
        </div>
    </div>
<script>
    function showFileName() {
        var input = document.getElementById("resumeInput");
        var label = document.getElementById("fileNameLabel");
        if (input.files && input.files[0]) {
            label.textContent = "Selected: " + input.files[0].name;
        } else {
            label.textContent = "";
        }
    }
    function showAnalyzeLoading() {
        document.getElementById('analyzeBtnText').innerHTML = "Analyzing...";
        return true;
    }
    var dropzone = document.getElementById('dropzone');
    dropzone.addEventListener('dragover', function(e) {
        e.preventDefault();
        dropzone.classList.add('dragover');
    });
    dropzone.addEventListener('dragleave', function(e) {
        e.preventDefault();
        dropzone.classList.remove('dragover');
    });
    dropzone.addEventListener('drop', function(e) {
        e.preventDefault();
        dropzone.classList.remove('dragover');
        var input = document.getElementById('resumeInput');
        input.files = e.dataTransfer.files;
        showFileName();
    });
    function dragOverHandler(e) { e.preventDefault(); dropzone.classList.add('dragover'); }
    function dragLeaveHandler(e) { e.preventDefault(); dropzone.classList.remove('dragover'); }
    function dropHandler(e) {
        e.preventDefault();
        dropzone.classList.remove('dragover');
        var input = document.getElementById('resumeInput');
        input.files = e.dataTransfer.files;
        showFileName();
    }
</script>
</body>
</html>
